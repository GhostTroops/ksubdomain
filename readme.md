[![Twitter](https://img.shields.io/twitter/url/http/Hktalent3135773.svg?style=social)](https://twitter.com/intent/follow?screen_name=Hktalent3135773) [![Follow on Twitter](https://img.shields.io/twitter/follow/Hktalent3135773.svg?style=social&label=Follow)](https://twitter.com/intent/follow?screen_name=Hktalent3135773) [![GitHub Followers](https://img.shields.io/github/followers/hktalent.svg?style=social&label=Follow)](https://github.com/hktalent/)
[![Top Langs](https://profile-counter.glitch.me/hktalent/count.svg)](https://51pwn.com)

(è¯¥ä»“åº“ä¸ºäºŒæ¬¡é›†æˆå¼€å‘ã€åˆ†å¸ƒå¼ã€å¤šä»»åŠ¡è€Œé‡æ„)
<img width="851" alt="Screenshot 2023-01-13 at 19 13 58" src="https://user-images.githubusercontent.com/18223385/212307600-97a84f14-4660-4ad6-a835-7811f6dcd87d.png">
ï¼ˆVIP user https://51pwn.comï¼‰
## ç‰¹æ€§å’ŒTips
- 2023-11-20
   * æ”¯æŒ ã€* å‰ç¼€,*.hackerone.comã€‘ï¼Œæˆ–è€… * åœ¨ä¸­é—´çš„æƒ…å†µ
   * æ”¯æŒ ã€åç¼€ *,hackerone.*ã€‘ï¼Œå…±è®¡ 9744 ç§åç¼€ï¼Œæ‰€ä»¥éå¿…è¦ï¼Œä¸å»ºè®® * åç¼€ï¼Œå¦åˆ™å°†è¶…è¿‡ 298 äº¿æ¬¡è¿­ä»£
   * æ”¯æŒ ã€ä¸­é—´ *,www.paypal-*.comã€‘
- 2023-04-03
   * åˆå¹¶ https://codeload.github.com/n0kovo/n0kovo_subdomains/zip/refs/heads/main å­—å…¸åˆ° config/subdomain.txt,å¹¶ä¼˜åŒ–å…¶ä¸­æ— æ•ˆæ•°æ®
   * å­—å…¸æ•°é‡ ç´¯è®¡ 3065536 ã€306ä¸‡+ã€‘ä¸ª
- 2023-01-13
    * å¢åŠ ç»“æœè‡ªåŠ¨è®°å½•å¤§æ•°æ®æœç´¢å¼•æ“(config/config.json)
    * æ‰€æœ‰å¼‚æ­¥ä¼˜åŒ–åˆ°å¯æ§çº¿ç¨‹æ± 
    * å¢åŠ å­—å…¸ -f é»˜è®¤å­—å…¸ config/subdomain.txtï¼ŒåŒ…å«äº† data ä¸‹ä¸¤ä¸ªå­—å…¸çš„åˆå¹¶ã€å»é‡
    * ä¼˜åŒ–å†…å­˜å¼€é”€ï¼Œé™ä½åˆ°600Må†…ï¼Œä¿®å¤åŸæ¥ç‰ˆæœ¬å†…å­˜æ³„æ¼çš„bug--åŸç‰ˆæ‰«æç»“æœè¶…è¿‡200ä¸‡åå†…å­˜æ³„æ¼åˆ° > 30G
  
![](image.gif)
## å®‰è£…
1. ä¸‹è½½äºŒè¿›åˆ¶ https://github.com/hktalent/ksubdomain/releases
2. å®‰è£…libpcapç¯å¢ƒ
   - Windows
     ä¸‹è½½`npcap`é©±åŠ¨ï¼Œwinpcapé©±åŠ¨æœ‰äººåé¦ˆæ— æ•ˆ
   - Linux
     å·²ç»é™æ€ç¼–è¯‘æ‰“åŒ…libpcapï¼Œæ— éœ€å…¶ä»–æ“ä½œ
   - MacOS
     è‡ªå¸¦ libpcap,æ— éœ€å…¶ä»–æ“ä½œ
3. æ‰§è¡Œ!
### å¿«é€Ÿå®‰è£…
éœ€è¦`go 1.21.3`ä»¥ä¸Šç‰ˆæœ¬å¹¶å®‰è£…`libpcap`ç¯å¢ƒï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤
```
go install -v github.com/hktalent/ksubdomain/cmd/ksubdomain@latest
```

## Useage
```bash
NAME:
   KSubdomain - æ— çŠ¶æ€å­åŸŸåçˆ†ç ´å·¥å…·

USAGE:
   ksubdomain [global options] command [command options] [arguments...]

VERSION:
   1.8.6

COMMANDS:
   enum, e    æšä¸¾åŸŸå
   verify, v  éªŒè¯æ¨¡å¼
   test       æµ‹è¯•æœ¬åœ°ç½‘å¡çš„æœ€å¤§å‘é€é€Ÿåº¦
   help, h    Shows a list of commands or help for one command

GLOBAL OPTIONS:
   --help, -h     show help (default: false)
   --version, -v  print the version (default: false)

```

## ä¸€ç§ç”¨æ³•
list.txt
å†…å®¹å¦‚ä¸‹ï¼Œè¡¨ç¤ºéœ€è¦å¯¹ä¸‹é¢çš„åˆ—è¡¨åç¼€è¿›è¡Œéå†
```
com
edu
gov
edu.cn
gov.cn
```
å‘½ä»¤,è®¾å®š500Må¸¦å®½ï¼Œè¾“å‡ºä¸ºjson
éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œçœ‹ä¸Šå»æˆåŠŸæ•°ä¸ºå‡ ç™¾ä¸‡ï¼Œå®é™…å¾—åˆ°æœ‰æ•ˆçš„ä¼šæ›´å°‘ï¼Œå› ä¸ºæœ‰çš„åŸŸåè¿”å›çš„ipæ˜¯"0.0.0.1"ï¼Œåœ¨ç»“æœä¸­ç›´æ¥è¿‡æ»¤æ‰äº†
```
cat  list.txt|./ksubdomain e -stdin --band 500m -o list_All.json -json 
```
other
```
cat $HOME/MyWork/bug-bounty/data/hk1/hk1.txt|./ksubdomain e -stdin --band 500m -o hk1.json -json
cat <<EOT>/usr/local/bin/doSubdomain
xx=`pwd`
cd $HOME/MyWork/ksubdomain
CNum=1000000
./ksubdomain e -d $1 --band 500m -o $1.json -json -l 2
mv $1.txt $xx/

EOT
chmod +x /usr/local/bin/doSubdomain
```
### æ¨¡å¼

**éªŒè¯æ¨¡å¼**
æä¾›å®Œæ•´çš„åŸŸååˆ—è¡¨ï¼Œksubdomainè´Ÿè´£å¿«é€Ÿè·å–ç»“æœ

```bash
./ksubdomain verify -h

NAME:
   ksubdomain verify - éªŒè¯æ¨¡å¼

USAGE:
   ksubdomain verify [command options] [arguments...]

OPTIONS:
   --filename value, -f value   éªŒè¯åŸŸåæ–‡ä»¶è·¯å¾„
   --band value, -b value       å®½å¸¦çš„ä¸‹è¡Œé€Ÿåº¦ï¼Œå¯ä»¥5M,5K,5G (default: "2m")
   --resolvers value, -r value  dnsæœåŠ¡å™¨æ–‡ä»¶è·¯å¾„ï¼Œä¸€è¡Œä¸€ä¸ªdnsåœ°å€
   --output value, -o value     è¾“å‡ºæ–‡ä»¶å
   --silent                     ä½¿ç”¨åå±å¹•å°†ä»…è¾“å‡ºåŸŸå (default: false)
   --retry value                é‡è¯•æ¬¡æ•°,å½“ä¸º-1æ—¶å°†ä¸€ç›´é‡è¯• (default: 3)
   --timeout value              è¶…æ—¶æ—¶é—´ (default: 6)
   --stdin                      æ¥å—stdinè¾“å…¥ (default: false)
   --only-domain, --od          åªæ‰“å°åŸŸåï¼Œä¸æ˜¾ç¤ºip (default: false)
   --not-print, --np            ä¸æ‰“å°åŸŸåç»“æœ (default: false)
   --dns-type value             dnsç±»å‹ 1ä¸ºaè®°å½• 2ä¸ºnsè®°å½• 5ä¸ºcnameè®°å½• 16ä¸ºtxt (default: 1)
   --help, -h                   show help (default: false)
```

```
ä»æ–‡ä»¶è¯»å– 
./ksubdomain v -f dict.txt

ä»stdinè¯»å–
echo "www.hacking8.com"|./ksubdomain v --stdin

è¯»å–nsè®°å½•
echo "hacking8.com" | ./ksubdomain v --stdin --dns-type 2
```

**æšä¸¾æ¨¡å¼**
åªæä¾›ä¸€çº§åŸŸåï¼ŒæŒ‡å®šåŸŸåå­—å…¸æˆ–ä½¿ç”¨ksubdomainå†…ç½®å­—å…¸ï¼Œæšä¸¾æ‰€æœ‰äºŒçº§åŸŸå

```bash
./ksubdomain enum -h

NAME:
   ksubdomain enum - æšä¸¾åŸŸå

USAGE:
   ksubdomain enum [command options] [arguments...]

OPTIONS:
   --band value, -b value          å®½å¸¦çš„ä¸‹è¡Œé€Ÿåº¦ï¼Œå¯ä»¥5M,5K,5G (default: "2m")
   --resolvers value, -r value     dnsæœåŠ¡å™¨æ–‡ä»¶è·¯å¾„ï¼Œä¸€è¡Œä¸€ä¸ªdnsåœ°å€
   --output value, -o value        è¾“å‡ºæ–‡ä»¶å
   --silent                        ä½¿ç”¨åå±å¹•å°†ä»…è¾“å‡ºåŸŸå (default: false)
   --retry value                   é‡è¯•æ¬¡æ•°,å½“ä¸º-1æ—¶å°†ä¸€ç›´é‡è¯• (default: 3)
   --timeout value                 è¶…æ—¶æ—¶é—´ (default: 6)
   --stdin                         æ¥å—stdinè¾“å…¥ (default: false)
   --only-domain, --od             åªæ‰“å°åŸŸåï¼Œä¸æ˜¾ç¤ºip (default: false)
   --not-print, --np               ä¸æ‰“å°åŸŸåç»“æœ (default: false)
   --dns-type value                dnsç±»å‹ 1ä¸ºaè®°å½• 2ä¸ºnsè®°å½• 5ä¸ºcnameè®°å½• 16ä¸ºtxt (default: 1)
   --domain value, -d value        çˆ†ç ´çš„åŸŸå
   --domainList value, --dl value  ä»æ–‡ä»¶ä¸­æŒ‡å®šåŸŸå
   --filename value, -f value      å­—å…¸è·¯å¾„
   --skip-wild                     è·³è¿‡æ³›è§£æåŸŸå (default: false)
   --level value, -l value         æšä¸¾å‡ çº§åŸŸåï¼Œé»˜è®¤ä¸º2ï¼ŒäºŒçº§åŸŸå (default: 2)
   --level-dict value, --ld value  æšä¸¾å¤šçº§åŸŸåçš„å­—å…¸æ–‡ä»¶ï¼Œå½“levelå¤§äº2æ—¶å€™ä½¿ç”¨ï¼Œä¸å¡«åˆ™ä¼šé»˜è®¤
   --help, -h                      show help (default: false)
```

```
./ksubdomain e -d baidu.com

ä»stdinè·å–
echo "baidu.com"|./ksubdomain e --stdin
```

# How ...
- pcapæ‰“å¼€å¤±è´¥:enxx: You don't have permission to capture on that device ((cannot open BPF device) /dev/bpf0: Permission denied)
```
go build -o ksubdomain main.go;cp ksubdomain ~/go/bin/ 
sudo chgrp staff /dev/bpf*
cat $HOME/MyWork/bounty-targets-data/data/hackerone_data.json|jq ".[].targets.in_scope[0].asset_identifier"|grep -v 'null'
cat $HOME/MyWork/bounty-targets-data/data/hackerone_data.json|jq ".[].targets.in_scope[0].asset_identifier"|grep '"\*\.'|sed 's/"//g'|sed 's/^\*\.//g' >lists.txt
echo $PPSSWWDD| sudo -S ./ksubdomain enum -b 5M --dl lists.txt -f $HOME/MyWork/scan4all/config/database/subdomain.txt
```

## ç‰¹æ€§å’ŒTips
- æ— çŠ¶æ€çˆ†ç ´ï¼Œæœ‰å¤±è´¥é‡å‘æœºåˆ¶ï¼Œé€Ÿåº¦æå¿«
- ä¸­æ–‡å¸®åŠ©ï¼Œ-hä¼šçœ‹åˆ°ä¸­æ–‡å¸®åŠ©
- ä¸¤ç§æ¨¡å¼ï¼Œæšä¸¾æ¨¡å¼å’ŒéªŒè¯æ¨¡å¼ï¼Œæšä¸¾æ¨¡å¼å†…ç½®10wå­—å…¸
- å°†ç½‘ç»œå‚æ•°ç®€åŒ–ä¸ºäº†-bå‚æ•°ï¼Œè¾“å…¥ä½ çš„ç½‘ç»œä¸‹è½½é€Ÿåº¦å¦‚-b 5mï¼Œå°†ä¼šè‡ªåŠ¨é™åˆ¶ç½‘å¡å‘åŒ…é€Ÿåº¦ã€‚
- å¯ä»¥ä½¿ç”¨./ksubdomain testæ¥æµ‹è¯•æœ¬åœ°æœ€å¤§å‘åŒ…æ•°
- è·å–ç½‘å¡æ”¹ä¸ºäº†å…¨è‡ªåŠ¨å¹¶å¯ä»¥æ ¹æ®é…ç½®æ–‡ä»¶è¯»å–ã€‚
- ä¼šæœ‰ä¸€ä¸ªæ—¶æ—¶çš„è¿›åº¦æ¡ï¼Œä¾æ¬¡æ˜¾ç¤ºæˆåŠŸ/å‘é€/é˜Ÿåˆ—/æ¥æ”¶/å¤±è´¥/è€—æ—¶ ä¿¡æ¯ã€‚
- ä¸åŒè§„æ¨¡çš„æ•°æ®ï¼Œè°ƒæ•´ --retry --timeoutå‚æ•°å³å¯è·å¾—æœ€ä¼˜æ•ˆæœ
- å½“--retryä¸º-1ï¼Œå°†ä¼šä¸€ç›´é‡è¯•ç›´åˆ°æ‰€æœ‰æˆåŠŸã€‚
- æ”¯æŒçˆ†ç ´nsè®°å½•

## ä¸massdnsã€dnsxå¯¹æ¯”

ä½¿ç”¨100wå­—å…¸ï¼Œåœ¨4H5Mçš„ç½‘ç»œç¯å¢ƒä¸‹æµ‹è¯•

|          | ksubdomain                                                   | massdns                                                      | dnsx                                                         |
| -------- | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| æ”¯æŒç³»ç»Ÿ | Windows/Linux/Darwin                                         | Windows/Linux/Darwin                                         | Windows/Linux/Darwin                                         |
| åŠŸèƒ½ | æ”¯æŒéªŒè¯å’Œæšä¸¾ | åªèƒ½éªŒè¯ | åªèƒ½éªŒè¯ |
| å‘åŒ…æ–¹å¼ | pcapç½‘å¡å‘åŒ…                                                 | epoll,pcap,socket                                            | socket                                                       |
| å‘½ä»¤è¡Œ | time ./ksubdomain v -b 5m -f d2.txt -o ksubdomain.txt -r dns.txt --retry 3 --np | time ./massdns -r dns.txt -t AAAA -w massdns.txt d2.txt --root -o L | time ./dnsx -a -o dnsx.txt -r dns.txt -l d2.txt -retry 3 -t 5000 |
| å¤‡æ³¨   | åŠ äº†--np é˜²æ­¢æ‰“å°è¿‡å¤š                                        |                                                              |                                                              |
| ç»“æœ   | è€—æ—¶:1m28.273s<br />æˆåŠŸä¸ªæ•°:1397                            | è€—æ—¶:3m29.337s<br />æˆåŠŸä¸ªæ•°:1396                            | è€—æ—¶:5m26.780s <br />æˆåŠŸä¸ªæ•°:1396                           |

ksubdomainåªéœ€è¦1åˆ†åŠï¼Œé€Ÿåº¦è¿œè¿œæ¯”massdnsã€dnsxå¿«~

## å‚è€ƒ

- åŸksubdomain https://github.com/knownsec/ksubdomain
- ä» Masscan, Zmap æºç åˆ†æåˆ°å¼€å‘å®è·µ <https://paper.seebug.org/1052/>
- ksubdomain æ— çŠ¶æ€åŸŸåçˆ†ç ´å·¥å…·ä»‹ç» <https://paper.seebug.org/1325/>
- [ksubdomainä¸massdnsçš„å¯¹æ¯”](https://mp.weixin.qq.com/s?__biz=MzU2NzcwNTY3Mg==&mid=2247484471&idx=1&sn=322d5db2d11363cd2392d7bd29c679f1&chksm=fc986d10cbefe406f4bda22f62a16f08c71f31c241024fc82ecbb8e41c9c7188cfbd71276b81&token=76024279&lang=zh_CN#rd) 


# Communication group (WeChat, QQï¼ŒTg)
|Wechat|Or|QQchat|Or|Tg|
|---|---|---|--- |--- |
| <img width=166 src=https://github.com/hktalent/scan4all/blob/main/static/wcq.JPG> || <img width=166 src=https://github.com/hktalent/scan4all/blob/main/static/qqc.jpg> || <img width=166 src=https://github.com/hktalent/scan4all/blob/main/static/tg.jpg> |


## ğŸ’–Star
[![Stargazers over time](https://starchart.cc/hktalent/ksubdomain.svg)](https://starchart.cc/hktalent/ksubdomain)

# Donation
| Wechat Pay | AliPay | Paypal | BTC Pay |BCH Pay |
| --- | --- | --- | --- | --- |
|<img src=https://raw.githubusercontent.com/hktalent/myhktools/main/md/wc.png>|<img width=166 src=https://raw.githubusercontent.com/hktalent/myhktools/main/md/zfb.png>|[paypal](https://www.paypal.me/pwned2019) **miracletalent@gmail.com**|<img width=166 src=https://raw.githubusercontent.com/hktalent/myhktools/main/md/BTC.png>|<img width=166 src=https://raw.githubusercontent.com/hktalent/myhktools/main/md/BCH.jpg>|

<!--
cat $HOME/MyWork/bug-bounty/data/bounty-targets-data/data/hackerone_data.json|jq '.[].targets.in_scope[].asset_identifier'|grep -E '\*|https:\/\/'|grep -E "\*\."|tr ', ' '\n'|tr -d '"' |sort -u|sed -E 's/http(s)?:\/\/\*/\*/g' |sed -E 's/\/.*$|\*$//g'>$HOME/MyWork/ksubdomain/hk1.txt


-->